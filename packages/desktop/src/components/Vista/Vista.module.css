/* Vista Background Styles */

/* ═══════════════════════════════════════════════════════════════════════════
   KEYFRAME ANIMATIONS - Subtle, ±2% amplitude maximum
   ═══════════════════════════════════════════════════════════════════════════ */

@keyframes flicker {
  0%, 100% { transform: scaleY(1) scaleX(1); }
  25% { transform: scaleY(1.02) scaleX(0.98); }
  50% { transform: scaleY(0.98) scaleX(1.02); }
  75% { transform: scaleY(1.01) scaleX(0.99); }
}

@keyframes glow-pulse {
  0%, 100% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.05); }
}

@keyframes rise {
  0% { transform: translateY(0) translateX(0); opacity: 0.8; }
  50% { transform: translateY(-30px) translateX(5px); opacity: 0.5; }
  100% { transform: translateY(-60px) translateX(-3px); opacity: 0; }
}

@keyframes twinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.6; }
}

@keyframes shooting-star {
  0% { transform: translateX(0) translateY(0); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translateX(100px) translateY(50px); opacity: 0; }
}

.vista {
  position: absolute;
  inset: 0;
  overflow: hidden;
  z-index: var(--z-vista);
}

.sky {
  position: absolute;
  inset: 0;
}

.silhouette {
  position: absolute;
  bottom: 80px; /* Above GlobalInputBar (52px) + keyboard hints + spacing */
  left: 0;
  right: 0;
}

.silhouette svg {
  width: 100%;
  height: auto;
  display: block;
}

.warmth {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
    ellipse at 20% 70%,
    rgba(201, 165, 90, 0.06) 0%,
    transparent 50%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   FIRE LOOKOUT VISTA (Default)
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaLookout .sky {
  background: linear-gradient(
    180deg,
    #4A80A0 0%,
    #6A9AB5 20%,
    #8AB5C8 40%,
    #A5C5D0 55%,
    #90B0A8 68%,
    #6A9078 80%,
    #4A7058 92%,
    #3A5A48 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   GAS STATION DUSK VISTA
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaDusk .sky {
  background: linear-gradient(
    180deg,
    #5A7590 0%,
    #7A8895 15%,
    #9A9590 30%,
    #B8A088 45%,
    #C8A878 55%,
    #B09068 65%,
    #887858 75%,
    #685848 85%,
    #4A4038 95%,
    #3A3530 100%
  );
}

.vistaDusk .warmth {
  background: radial-gradient(
    ellipse at 25% 80%,
    rgba(220, 160, 80, 0.07) 0%,
    transparent 45%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   MONUMENT VALLEY VISTA - Desert southwest, buttes, open road
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaMonumentValley .sky {
  background: linear-gradient(
    180deg,
    #5088A8 0%,
    #70A0BD 18%,
    #90B8D0 35%,
    #B0CDD8 50%,
    #D0C8B8 62%,
    #C8A888 72%,
    #B08868 82%,
    #986848 92%,
    #885838 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   BIG SUR VISTA - Looking down from pulloff
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaBigSur .sky {
  background: linear-gradient(
    180deg,
    #5585A5 0%,
    #7098B0 15%,
    #90B0C0 30%,
    #A8C0C8 42%,
    #B8C8C8 52%,
    #88A8A0 62%,
    #588878 75%,
    #406858 88%,
    #4878A0 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   SWIMMING HOLE VISTA - Redwood shade, cold water
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaSwimmingHole .sky {
  background: linear-gradient(
    180deg,
    #5A90A8 0%,
    #7AA8B8 20%,
    #90B8C0 38%,
    #6A9880 50%,
    #4A7860 58%,
    #3A6850 65%,
    #4A8898 72%,
    #5A98A8 80%,
    #4A8898 88%,
    #3A7080 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   TRAIL BREAK VISTA - Hilux parked, mountain view
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaTrailBreak .sky {
  background: linear-gradient(
    180deg,
    #4A85A0 0%,
    #6AA0B5 22%,
    #8AB8C5 42%,
    #A0C5C8 55%,
    #88A890 68%,
    #689068 78%,
    #588858 88%,
    #486848 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   CAMPFIRE VISTA - Night, warm glow
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaCampfire .sky {
  background: linear-gradient(
    180deg,
    #2A3540 0%,
    #3A4550 20%,
    #4A5560 40%,
    #5A6068 55%,
    #4A5048 70%,
    #3A4038 85%,
    #2A3028 100%
  );
}

/* Multi-layer campfire glow system */
.campfireGlow {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

/* Outer glow - larger, softer, subtle pulse */
.campfireGlow::before {
  content: '';
  position: absolute;
  bottom: 15%;
  left: 50%;
  transform: translateX(-50%);
  width: 200px;
  height: 120px;
  background: radial-gradient(
    ellipse at center,
    rgba(255, 140, 40, 0.15) 0%,
    rgba(255, 100, 30, 0.08) 50%,
    transparent 100%
  );
  filter: blur(30px);
  animation: glow-pulse 4s ease-in-out infinite;
}

/* Inner glow - brighter, tighter, slightly offset pulse */
.campfireGlow::after {
  content: '';
  position: absolute;
  bottom: 12%;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 70px;
  background: radial-gradient(
    ellipse at center,
    rgba(255, 180, 80, 0.3) 0%,
    rgba(255, 140, 50, 0.15) 50%,
    transparent 100%
  );
  filter: blur(15px);
  animation: glow-pulse 3s ease-in-out infinite 0.5s;
}

/* ═══════════════════════════════════════════════════════════════════════════
   DINER WINDOW VISTA - Looking out from booth
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaDinerWindow .sky {
  background: linear-gradient(
    180deg,
    #5080A0 0%,
    #70A0B8 25%,
    #90B8C8 45%,
    #A8C8D0 60%,
    #90A898 75%,
    #708878 88%,
    #586858 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   DAWN VISTA - First light, ridge silhouette
   ═══════════════════════════════════════════════════════════════════════════ */

.vistaDawn .sky {
  background: linear-gradient(
    180deg,
    #4A5570 0%,
    #6A6880 15%,
    #8A7890 28%,
    #B08898 40%,
    #D09898 50%,
    #E0A890 58%,
    #D0A078 68%,
    #A08860 78%,
    #607050 88%,
    #4A5A42 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   RAIL CROPPING (Curtain/Shade Effect)
   ═══════════════════════════════════════════════════════════════════════════ */

/* When left rail is open, push Vista content right */
.leftRailOpen {
  left: var(--rail-width);
  transition: left 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* When right rail is open, pull Vista content left */
.rightRailOpen {
  right: var(--rail-width);
  transition: right 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Both rails - combine transitions */
.leftRailOpen.rightRailOpen {
  transition: left 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
              right 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Default transitions for smooth closing */
.vista {
  transition: left 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
              right 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* ═══════════════════════════════════════════════════════════════════════════
   FLAME & STAR ANIMATION CLASSES
   For use in SVG elements within vista scenes
   ═══════════════════════════════════════════════════════════════════════════ */

/* Flame layers - apply to SVG path elements */
:global(.flame-outer) {
  transform-origin: center bottom;
  animation: flicker 2s ease-in-out infinite;
}

:global(.flame-mid) {
  transform-origin: center bottom;
  animation: flicker 1.8s ease-in-out infinite 0.3s;
}

:global(.flame-inner) {
  transform-origin: center bottom;
  animation: flicker 1.5s ease-in-out infinite 0.6s;
}

/* Sparks - apply to small circle elements */
:global(.spark) {
  animation: rise 2s ease-out infinite;
}

:global(.spark-delay-1) {
  animation-delay: 0.5s;
}

:global(.spark-delay-2) {
  animation-delay: 1s;
}

:global(.spark-delay-3) {
  animation-delay: 1.5s;
}

/* Stars - apply to small circle elements in night scenes */
:global(.star) {
  animation: twinkle 3s ease-in-out infinite;
}

:global(.star-delay-1) {
  animation-delay: 0.5s;
}

:global(.star-delay-2) {
  animation-delay: 1s;
}

:global(.star-delay-3) {
  animation-delay: 1.5s;
}

:global(.star-delay-4) {
  animation-delay: 2s;
}

:global(.star-delay-5) {
  animation-delay: 2.5s;
}

/* Shooting star */
:global(.shooting-star) {
  animation: shooting-star 8s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════════════════════════════════
   REDUCED MOTION
   ═══════════════════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
  .vista {
    transition: none;
  }

  .campfireGlow::before,
  .campfireGlow::after {
    animation: none;
  }

  :global(.flame-outer),
  :global(.flame-mid),
  :global(.flame-inner),
  :global(.spark),
  :global(.star),
  :global(.shooting-star) {
    animation: none;
  }
}
